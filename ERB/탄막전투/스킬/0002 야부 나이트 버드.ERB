
@T_SKILL2(ARGS)
#FUNCTION
;ARGS = 인자
#DIM 스킬번호
#DIM 쿨타임
#DIM 지속시간
#DIM 명중률
#DIM 피해량
;-------------------
;성능 입력
;쿨타임 0 = 한 턴에 몇 번이라도, 쿨타임 1 = 한 턴에 한번, 쿨타임 2= 두 턴에 한번
;-------------------
쿨타임 = 5
지속시간 = 0 
명중률 = 33
피해량 = 10 * ARG능력치(T_턴주인,"지성")
;-------------------
SELECTCASE ARGS
CASE "쿨타임"
    ;쿨타임을 반환, 건들일 없다
    RETURNF 쿨타임
CASE "명중률"
    ;명중률을 반환함, 특정상황에서 명중률을 변동하고 싶으면 사용
    RETURNF 명중률
CASE "공격력"
    ;피해량을 반환, 공격력을 참조하려면 사용
    RETURNF 피해량
CASE "지속시간"
    RETURNF 지속시간
ENDSELECT

;문자열부
@T_SKILL_STR2(ARGS)
#FUNCTIONS
#DIMS 스킬명
#DIM 타입
#DIMS 속성
;-------------------
;성능 입력
;-------------------
스킬명 = 야부「나이트 버드」
타입 = 공격형
속성 '= "마력"
;-------------------
SELECTCASE ARGS
CASE "스킬명"
    RETURNF 스킬명
CASE "타입"
    RETURNF 타입
CASE "속성"
    ;피해속성을 반환
    RETURNF 속성
ENDSELECT

;표시할 때 다른 색깔을 쓰고 싶은 경우 변경
@T_SKILL2_COLOR(사용자, ARGS)

#DIM 사용자
ARGS = 인자
SELECTCASE ARGS
CASE "색깔_시전가능"
    ;시전가능, 흰색으로 빛남
    RETURN 0xFFFFFF
CASE "색깔_시전불가"
    ;시전불가, 회색임
    RETURN 0x585858
ENDSELECT

@ONGOING_T_SKILL2(사용자, ARGS)
#DIM 사용자
#DIM 남은지속시간
#DIM 남은쿨타임

SELECTCASE ARGS
;스킬 발동시 남은 지속시간/쿨타임 처리 부분
CASE "쿨타임설정"
    남은쿨타임 = T_SKILL2("쿨타임")
CASE "지속시간설정"
    남은지속시간 = T_SKILL2("지속시간")
CASE "턴엔드"
    ;매 턴이 지날때마다 지속시간과 쿨타임처리를 하는 부분
    SIF 남은지속시간 > 0
        남은지속시간--
    SIF 남은쿨타임 > 0
        남은쿨타임--
CASE "남은지속시간"
    ;남은 지속시간 표시, 건들일 없다
    RETURN 남은지속시간
CASE "남은쿨타임"
    ;남은쿨타임을 반환, 건들일 없다
    RETURN 남은쿨타임
CASE "시스템체크"
    ;시스템 메시지에 따른 검사, 패시브 스킬등에 이용, 액티브는 딱히 쓸 일이 있나?

CASE "지속효과발동"
    ;지속적으로 효과가 발동하는 스킬의 경우, 여기에 효과를 입력
    IF 남은지속시간 > 0

    ENDIF
ENDSELECT

@AFTER_T_SKILL2(사용자)
#DIM 사용자
#DIM 피해량
#DIMS 속성

;쿨타임은 미리 설정함
CALL ONGOING_T_SKILL2(사용자, "쿨타임설정")

;명중 대응
IF T_SKILL2("명중률") >= RAND:100 + 1
    ;명중!
    ;----------------
    ;대사는 이쪽
    ;----------------
    PRINTFORML 야부「나이트 버드」
    PRINTFORML 깊은 어둠이 %T_턴반대와% %T_턴주인을% 감춘다...!
    PRINTFORML 이윽고 보이지 않는 어둠속에서 날아온 탄이 %T_턴반대를% 덮쳤다!
    ;----------------
    ;처리는 이쪽, 무언가 효과를 넣으려면 여기에 작성
    ;----------------

    피해량 = T_SKILL2("공격력")
    속성 '= T_SKILL2_STR("속성")
    CALL T_데미지(T_턴반대, 피해량, 속성)

    CALL ONGOING_T_SKILL2(사용자, "지속시간설정")
    RETURN 1
ELSE
    ;!감나빗!
    SETCOLOR 0xFF4444
    PRINTFORML 빗나감!
    RESETCOLOR
    ;----------------
    ;대사는 이쪽
    ;----------------
    PRINTFORML 어둠의 기운이 %T_턴주인에게%서 퍼져나왔으나 이내 흩어져 버렸다...
    ;----------------
    ;처리는 이쪽, 무언가 효과를 넣으려면 여기에 작성
    ;----------------
    RETURN 0
ENDIF

@뉴탄막전투(ARG,ARG:1)
;ARG - 내 번호
;ARG:1 - 상대방 번호
CALL 뉴탄막전투초기화(ARG,ARG:1)
CALL 뉴탄막루틴

@뉴탄막전투초기화(ARG,ARG:1)
T_나 = ARG
T_적 = ARG:1


T_내체력 = BASE:ARG:체력+MIN((10*CFLAG:ARG:인내),1000)
T_내최대체력 = T_내체력
T_내힘 = CFLAG:T_나:힘
T_내지성= CFLAG:T_나:지성
T_내인내= CFLAG:T_나:인내
T_내속도= CFLAG:T_나:속도
T_내운= CFLAG:T_나:운
;---
T_적체력 = BASE:T_적:체력+MIN(10*(CFLAG:(ARG:1):인내),1000)
T_적최대체력 = T_적체력
T_적힘 = CFLAG:T_적:힘
T_적지성= CFLAG:T_적:지성
T_적인내= CFLAG:T_적:인내
T_적속도= CFLAG:T_적:속도
T_적운= CFLAG:T_적:운
CALL 공방세팅

;----
;기타변수 초기화 
;----

;----

@공방세팅
T_내공격력= T_내힘*20+ (T_내속도*5)+T_내공격력보정
T_내방어력= T_내속도*5+ T_내인내*15+T_내방어력보정
SELECTCASE ABL:T_나:전투능력
    CASE 0
        TIMES T_내공격력, 1.0
        TIMES T_내방어력, 1.0
    CASE 1
        TIMES T_내공격력, 1.3
        TIMES T_내방어력, 1.3
    CASE 2
        TIMES T_내공격력, 1.6
        TIMES T_내방어력, 1.6
    CASE 3
        TIMES T_내공격력, 1.9
        TIMES T_내방어력, 1.9
    CASE 4
        TIMES T_내공격력, 2.2
        TIMES T_내방어력, 2.2
    CASE 5
        TIMES T_내공격력, 2.5
        TIMES T_내방어력, 2.5
    CASE 6
        TIMES T_내공격력, 2.7
        TIMES T_내방어력, 2.7
    CASE 7
        TIMES T_내공격력, 2.9
        TIMES T_내방어력, 2.9
    CASEELSE
        TIMES T_내공격력, 3.0
        TIMES T_내방어력, 3.0
ENDSELECT
T_적공격력= T_적힘*20 + (T_적속도*5)+T_적공격력보정
T_적방어력= T_적속도*5+ T_적인내*15+T_적방어력보정
IF 고로시 == 1
    TIMES 적공격력, 2.0
    TIMES 적방어력, 2.0
ENDIF
SELECTCASE ABL:T_적:전투능력
    CASE 0
        TIMES T_적공격력, 1.0
        TIMES T_적방어력, 1.0
    CASE 1
        TIMES T_적공격력, 1.3
        TIMES T_적방어력, 1.3
    CASE 2
        TIMES T_적공격력, 1.6
        TIMES T_적방어력, 1.6
    CASE 3
        TIMES T_적공격력, 1.9
        TIMES T_적방어력, 1.9
    CASE 4
        TIMES T_적공격력, 2.2
        TIMES T_적방어력, 2.2
    CASE 5
        TIMES T_적공격력, 2.5
        TIMES T_적방어력, 2.5
    CASE 6
        TIMES T_적공격력, 2.7
        TIMES T_적방어력, 2.7
    CASE 7
        TIMES T_적공격력, 2.9
        TIMES T_적방어력, 2.9
    CASEELSE
        TIMES T_적공격력, 3.0
        TIMES T_적방어력, 3.0
ENDSELECT


@뉴탄막루틴
CALL 공방세팅
CALL 뉴탄막상태창
PRINTW


@뉴탄막상태창
#DIM DYNAMIC 내체력백분율
#DIM DYNAMIC 적체력백분율
내체력백분율 = (T_내체력 * 100)/MAXBASE:T_나:체력
적체력백분율 = (T_적체력 * 100)/MAXBASE:T_적:체력

DRAWLINE
PRINTFORML {T_TIME}턴
DRAWLINE
ALIGNMENT CENTER
PRINTFORML [%CALLNAME:T_적%]
;화상을 넣을려면 이 사이에

;
PRINTFORM 체력
IF 적체력백분율 >= 70
    SETCOLOR 0x19FF19
ELSEIF 적체력백분율 >= 50
    SETCOLOR 0xFF8000
ELSEIF 적체력백분율 >= 30
    SETCOLOR 0xFFFF00
ELSE
    SETCOLOR 0xFF0000
ENDIF
PRINTFORM [
REPEAT (적체력백분율)
    PRINTFORM *
REND
REPEAT 100 - (적체력백분율)
    PRINTFORM .
REND
PRINTFORML ]
RESETCOLOR
PRINTFORML  ({T_적체력}/{T_적최대체력})
PRINTL
CALL 상태이상표시(2)
PRINTL
PRINTFORM 힘:{T_적힘}
PRINT  
CALL 능력치평가(T_적힘)
PRINT  
PRINTFORM 지성:{T_적지성}
PRINT  
CALL 능력치평가(T_적지성)
PRINT  
PRINTFORM 인내:{T_적인내}
PRINT  
CALL 능력치평가(T_적인내)
PRINT  
PRINTFORM 속도:{T_적속도}
PRINT  
CALL 능력치평가(T_적속도)
PRINT  
PRINTFORM 운:{T_적운}
PRINT  
CALL 능력치평가(T_적운)
PRINT  
PRINTL
PRINTFORM 공격력 : {T_적공격력}     
PRINTFORM 방어력 : {T_적방어력}
PRINTL
DRAWLINE
PRINTFORML [%CALLNAME:T_나%]
;화상을 넣을려면 이 사이에

;
PRINTFORM 체력
IF 내체력백분율 >= 70
    SETCOLOR 0x19FF19
ELSEIF 내체력백분율 >= 50
    SETCOLOR 0xFF8000
ELSEIF 내체력백분율 >= 30
    SETCOLOR 0xFFFF00
ELSE
    SETCOLOR 0xFF0000
ENDIF
PRINTFORM [
REPEAT (내체력백분율)
    PRINTFORM *
REND
REPEAT 100 - (내체력백분율)
    PRINTFORM .
REND
PRINTFORML ]
RESETCOLOR
PRINTFORML  ({T_내체력}/{T_내최대체력})
PRINTL
CALL 상태이상표시(1)
PRINTL
PRINTFORM 힘:{T_내힘}
PRINT  
CALL 능력치평가(T_내힘)
PRINT  
PRINTFORM 지성:{T_내지성}
PRINT  
CALL 능력치평가(T_내지성)
PRINT  
PRINTFORM 인내:{T_내인내}
PRINT  
CALL 능력치평가(T_내인내)
PRINT  
PRINTFORM 속도:{T_내속도}
PRINT  
CALL 능력치평가(T_내속도)
PRINT  
PRINTFORM 운:{T_내운}
PRINT  
CALL 능력치평가(T_내운)
PRINT  
PRINTL
PRINTFORM 공격력 : {T_내공격력}     
PRINTFORM 방어력 : {T_내방어력}
PRINTL
DRAWLINE
ALIGNMENT LEFT

@상태이상표시(ARG)
;ARG - 1=나 2=적
;일단 자리만

@능력치평가(ARG)
;;0=고자, 10=요정급, 15=인간급 20=머요정급 25=소악마급 35=들요괴급 45=텐구급 65=오니급 80=신령급 90=월인급...100=몰라 무서워 시발
IF ARG >= 95
    SETCOLOR 0xFA58F4
    PRINT SSS
ELSEIF ARG >= 90
    SETCOLOR 0xFA58F4
    PRINT SS+
ELSEIF ARG >= 85
    SETCOLOR 0xFA58F4
    PRINT SS
ELSEIF ARG >= 80
    SETCOLOR 0xFA58F4
    PRINT SS-
ELSEIF ARG >= 75
    SETCOLOR 0xFA58F4
    PRINT S+
ELSEIF ARG >= 70
    SETCOLOR 0xFF00FF
    PRINT S
ELSEIF ARG >= 65
    SETCOLOR 0x8A0886
    PRINT S-
ELSEIF ARG >= 60
    SETCOLOR 0x0000FF
    PRINT A
ELSEIF ARG >= 55
    SETCOLOR 0x08088A
    PRINT A-
ELSEIF ARG >= 50
    SETCOLOR 0xFA5858
    PRINT B+
ELSEIF ARG >= 45
    SETCOLOR 0xFF0000
    PRINT B
ELSEIF ARG >= 40
    SETCOLOR 0xF3F781
    PRINT C+
ELSEIF ARG >= 35
    SETCOLOR 0xFFFF00
    PRINT C
ELSEIF ARG >= 30
    SETCOLOR 0xAEB404
    PRINT C-
ELSEIF ARG >= 25
    SETCOLOR 0x81DAF5
    PRINT D+
ELSEIF ARG >= 20
    SETCOLOR 0x00BFFF
    PRINT D
ELSEIF ARG >= 15
    SETCOLOR 0x086A87
    PRINT D-
ELSEIF ARG >= 10
    SETCOLOR 0x00FF40
    PRINT E
ELSEIF ARG >= 0
    SETCOLOR 0x848484
    PRINT F
ELSE
    SETCOLOR 0x2E2E2E
    PRINT F-
ENDIF
RESETCOLOR